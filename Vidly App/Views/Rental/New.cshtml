
@{ 
    ViewBag.Title = "New Rental Form";
}


<form>
    <div class="form-group">
        <label>Customer</label>
        <input id="customer" type="text" value="" class="form-control" />
        <input type="hidden" id="hfCustomerId" runat="server" />
    </div> 
    <div class="form-group">
        <label>Movies</label>
        <input id="movie" type="text" value="" class="form-control" />
    </div>
    <button class="btn btn-primary">Submit</button>
</form>
5
@section scripts
{
    <script>
        $(document).ready(function () {
            var vm = {
                moviesId:[]
            };
            $('#customer').autocomplete({
               // minLength:2,
                source: "/api/customers/search"
                //source: function (request, response) {
                //    $.ajax({
                //        url: ,
                //        method: "post",
                //        contentType: "application/json;charset=utf-8",
                //        data: JSON.stringify({ term: request.term }),
                //        dataType: "json",
                //        success: function (data) {
                //           // console.log(data)
                //            response($.map(data.d, function (item) {
                //                //return item.name;
                //                //console.log(item.Name)
                //                return {
                //                    label: item.split('-')[0],
                //                    val: item.split('-')[1]
                //                }
                //            }))
                //        },
                //        error: function (err) {
                //            console.log(err);
                //        }
                //    });
                //},
                //select: function (e, i) {
                //    $('#hfCustomerId').val(i.item.val);
                //    vm.customerId = i.item.customerId
                //},
                //minLength:1
            })


            $('#movie').autocomplete({
                // minLength:2,
                source: function (request, response) {
                    $.ajax({
                        url: "/api/movies",
                        method: "get",
                        contentType: "application/json;charset=utf-8",
                        data: JSON.stringify({ term: request.term }),
                        dataType: "json",
                        success: function (data) {
                            // console.log(data)
                            response($.map(data, function (item) {
                                return item.name;
                                vm.movieId = item.customerId
                                //console.log(item.Name)
                            }))
                        },
                        error: function (err) {
                            console.log(err);
                        }
                    });
                },
                select: function (e, movie) {
                    $('#movie').append("<li>" + movie.name + "<li>");
                    $('#movie').val(movie.name);
                    vm.moviesId.push(movie.movieId);
                    console.log(movie.name);
                },
                minLength: 1
            })

      


        });
    </script>
}